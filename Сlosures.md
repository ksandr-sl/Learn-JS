**Замыкание** – это функция, которая запоминает свои внешние переменные с помощью скрытого свойства `[[Environment]]` и может получить к ним доступ. 

Объект лексического окружения состоит из двух частей:

1.  **Environment Record** – объект, в котором как свойства хранятся все локальные переменные (а также некоторая другая информация, такая как значение `this`).
    
2.  Ссылка на _внешнее лексическое окружение_ – то есть то, которое соответствует коду снаружи (снаружи от текущих фигурных скобок).

```js
function makeCounter() { 
	let count = 0; 

	return function counter() { 
		return count++; 
	}; 
}

let counter = makeCounter(); // функции созданы разными вызовами
let counter2 = makeCounter(); // у каждой свое лексические окружение

counter(); // 0
counter(); // 1
counter(); // 2

counter2(); //0      и своя переменная 'count'
```

В JavaScript, все функции изначально являются замыканиями.

Есть только одно исключение - функции объявленные через `new Function`, имеют `[[Environment]]`, ссылающийся на глобальное лексическое окружение, а не на родительское.

Синтаксис:

```js
let func = new Function ([arg1, arg2, ...argN], functionBody);

// например
let func = new Function('a', 'b', 'return a + b');
```

Переданные явно параметры – гораздо лучшее архитектурное решение, которое не вызывает проблем у минификаторов.

---




















[[Functions]]